apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'maven-publish'

android {
    compileSdkVersion 31
    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 31
    }
    compileOptions {
        kotlinOptions.freeCompilerArgs += ['-module-name', "com.opensource.svgaplayer"]
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    packagingOptions {
        exclude 'META-INF/ASL2.0'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/MANIFEST.MF'
    }
}
group = 'com.duorong'
version = '2.6.2'

publishing {
    publications {
        mavenAar(MavenPublication) {
            afterEvaluate {
                groupId = 'com.duorong'
                artifactId = 'SVGAPlayer-Android'
                version = '2.6.2'
                // 指定发布的构件
                from components.release
            }

        }
    }

    repositories {
        maven {
            allowInsecureProtocol = true
            url = uri('http://mvn.shiguangxu.com/repository/android/')
            credentials {
                username = ''
                password = ''
            }
        }
    }
}
task comps {
    afterEvaluate {
        println("Components: " + components*.name)
    }
}
dependencies {
    implementation 'com.squareup.wire:wire-runtime:4.4.1'
}
